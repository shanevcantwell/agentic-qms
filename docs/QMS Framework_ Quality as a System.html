<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QMS Framework: Quality as a System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-bg: #0A0A0A;
            --color-text: #E0E0E0;
            --color-text-dim: #999999;
            --color-border: #2A2A2A;
            --color-card: #141414;
            --color-pass: #22C55E; /* Green-500 */
            --color-fail: #EF4444; /* Red-500 */
            --color-audit: #F59E0B; /* Amber-500 */
            --color-monitor: #3B82F6; /* Blue-500 */
        }

        body {
            background-color: var(--color-bg);
            color: var(--color-text);
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .connector-path {
            stroke-width: 1.5px;
            fill: none;
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            animation: draw-line 2s ease-out forwards;
            animation-delay: var(--delay, 0s);
        }
        
        .connector-label {
            fill: var(--color-text-dim);
            font-size: 10px;
            font-family: 'Inter', sans-serif;
            text-anchor: middle;
            opacity: 0;
            animation: fade-in-text 1s ease-out forwards;
            animation-delay: var(--delay, 0s);
        }

        @keyframes draw-line {
            to { stroke-dashoffset: 0; }
        }
        
        @keyframes fade-in-text {
            to { opacity: 1; }
        }

        .fade-in-up {
            opacity: 0;
            transform: translateY(20px);
            animation: fade-in-up-anim 0.8s cubic-bezier(0.215, 0.610, 0.355, 1.000) forwards;
            animation-delay: var(--delay, 0s);
        }

        @keyframes fade-in-up-anim {
            to { opacity: 1; transform: translateY(0); }
        }
        
        .node-card {
            background-color: var(--color-card);
            border: 1px solid var(--color-border);
            transition: all 0.3s ease;
        }

        .node-card:hover {
            border-color: var(--color-pass);
            transform: translateY(-4px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        
        .subgraph-title {
            color: var(--color-text-dim);
            font-size: 0.8rem;
            font-weight: 500;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            text-align: center;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body class="overflow-x-hidden">

    <div class="relative min-h-screen w-full">
        <!-- Background Gradient -->
        <div class="absolute top-0 left-0 w-full h-full z-0">
            <div class="absolute top-[-10%] left-[50%] w-[50%] h-[50%] bg-blue-900/30 rounded-full blur-3xl opacity-30 -translate-x-1/2"></div>
            <div class="absolute bottom-[-20%] right-[-10%] w-[40%] h-[60%] bg-red-900/20 rounded-full blur-3xl opacity-40"></div>
        </div>

        <main class="relative z-10 p-4 sm:p-8 md:p-12">
            <!-- Header -->
            <header class="fade-in-up">
                <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold text-center text-white">
                    QMS Framework
                </h1>
                <p class="mt-4 max-w-3xl mx-auto text-center text-lg text-gray-400">
                    Applying Quality Management System principles to AI generation ensures robust, reliable, and continuously improving outputs. This framework treats AI interaction as a monitored production line with built-in quality control and corrective action loops.
                </p>
            </header>

            <!-- Visualization -->
            <div id="visualization-container" class="relative mt-16 md:mt-24 max-w-7xl mx-auto">
                <!-- SVG for Connectors -->
                <svg id="connector-svg" class="absolute top-0 left-0 w-full h-full z-0" aria-hidden="true"></svg>

                <!-- Grid Layout for Nodes -->
                <div class="relative z-10 grid grid-cols-1 md:grid-cols-12 gap-y-12 md:gap-x-8 md:gap-y-20 items-start">
                    
                    <!-- Row 1: Customer Requirement -->
                    <div class="md:col-start-5 md:col-span-4 fade-in-up" style="--delay: 0.2s;">
                        <div id="node-A" class="node-card p-4 rounded-lg text-center">
                            <h3 class="font-semibold text-white"><b>Customer Requirement</b></h3>
                            <p class="text-sm text-gray-400 mt-1">(Source of Truth)</p>
                        </div>
                    </div>

                    <!-- Row 2: Process Execution -->
                    <div class="md:col-span-12 grid grid-cols-1 md:grid-cols-12 gap-y-12 md:gap-x-8 items-center">
                        <div class="md:col-start-1 md:col-span-3 fade-in-up" style="--delay: 0.4s;">
                            <div id="node-B" class="node-card p-4 rounded-lg text-center">
                                <h3 class="font-semibold text-white">Progenitor A</h3>
                            </div>
                        </div>
                        <div class="md:col-start-5 md:col-span-4 fade-in-up" style="--delay: 0.6s;">
                             <div class="subgraph-title">Process Execution (Workflow)</div>
                            <div id="node-F" class="node-card p-4 rounded-lg text-center">
                                <h3 class="font-semibold text-white">Synthesizer C</h3>
                            </div>
                        </div>
                        <div class="md:col-start-10 md:col-span-3 fade-in-up" style="--delay: 0.5s;">
                            <div id="node-C" class="node-card p-4 rounded-lg text-center">
                                <h3 class="font-semibold text-white">Progenitor B</h3>
                            </div>
                        </div>
                    </div>

                    <!-- Row 3: Quality Control -->
                    <div class="md:col-span-12 grid grid-cols-1 md:grid-cols-12 gap-y-12 md:gap-x-8 items-center">
                        <div class="md:col-start-1 md:col-span-3 fade-in-up" style="--delay: 1.2s;">
                            <div class="subgraph-title">Quality Assurance</div>
                            <div id="node-SI" class="node-card p-4 rounded-lg text-center border-l-4" style="border-left-color: var(--color-monitor);">
                                <h3 class="font-semibold text-white"><b>Instrumentation</b></h3>
                                <p class="text-sm text-gray-400 mt-1"><i>Process Monitoring</i></p>
                            </div>
                        </div>
                        <div class="md:col-start-5 md:col-span-4 fade-in-up" style="--delay: 0.8s;">
                            <div class="subgraph-title">Quality Control</div>
                            <div id="node-H" class="node-card p-4 rounded-lg text-center border-2" style="border-color: var(--color-audit);">
                                <h3 class="font-semibold text-white"><b>Validator D</b></h3>
                                <p class="text-sm text-gray-400 mt-1"><i>Internal Audit</i></p>
                            </div>
                        </div>
                        <div class="md:col-start-10 md:col-span-3 fade-in-up" style="--delay: 1.0s;">
                            <div class="subgraph-title">CAPA</div>
                            <div id="node-I" class="node-card p-4 rounded-lg text-center border-2 bg-red-900/20" style="border-color: var(--color-fail);">
                                <h3 class="font-semibold text-white"><b>Feedback Loop</b></h3>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Row 4: Output -->
                    <div class="md:col-start-5 md:col-span-4 fade-in-up" style="--delay: 1.4s;">
                         <div id="node-G" class="node-card p-6 rounded-lg text-center bg-green-500/10 border-2" style="border-color: var(--color-pass);">
                            <h3 class="font-bold text-lg text-white"><b>Verified Product</b></h3>
                            <p class="text-sm text-green-300 mt-1">Final Artifact</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Explanations Section -->
            <section class="mt-24 md:mt-32 max-w-7xl mx-auto">
                <h2 class="text-3xl font-bold text-center text-white fade-in-up" style="--delay: 1.6s;">Core Principles</h2>
                <div class="mt-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    
                    <div class="node-card p-6 rounded-lg fade-in-up" style="--delay: 1.7s;">
                        <h3 class="text-xl font-semibold text-white">Source of Truth</h3>
                        <p class="mt-3 text-gray-400">The process begins with a clear, unambiguous "Customer Requirement." This is the foundational specification against which all subsequent work is measured, ensuring the final product is aligned with the initial goal.</p>
                    </div>

                    <div class="node-card p-6 rounded-lg fade-in-up" style="--delay: 1.8s;">
                        <h3 class="text-xl font-semibold text-white">Monitored Execution</h3>
                        <p class="mt-3 text-gray-400">Like a production line, multiple "Progenitors" create components that are assembled by a "Synthesizer." Crucially, the entire workflow is observed by "Instrumentation," which collects process data without interfering.</p>
                    </div>

                    <div class="node-card p-6 rounded-lg fade-in-up" style="--delay: 1.9s;">
                        <h3 class="text-xl font-semibold text-white">Systematic Validation</h3>
                        <p class="mt-3 text-gray-400">The "Validator" performs an internal audit, using evidence from Instrumentation to check the synthesized product against the original requirement. This is a go/no-go decision point: products either pass inspection or are rejected.</p>
                    </div>

                    <div class="node-card p-6 rounded-lg fade-in-up" style="--delay: 2.0s;">
                        <h3 class="text-xl font-semibold text-white">Corrective Action (CAPA)</h3>
                        <p class="mt-3 text-gray-400">A failed validation triggers a "Corrective and Preventive Action." The "Feedback Loop" sends the rejected product back for rework, providing context on the failure. This ensures the system learns from its mistakes and improves over time.</p>
                    </div>

                </div>
            </section>
        </main>
        
        <footer class="text-center p-8 mt-16">
            <p class="text-gray-600">Reflective Attention Framework</p>
        </footer>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('is-visible');
                if (entry.target.id === 'visualization-container') {
                    setTimeout(drawConnectors, 100);
                }
            }
        });
    }, { threshold: 0.1 });

    document.querySelectorAll('.fade-in-up').forEach(el => observer.observe(el));
    observer.observe(document.getElementById('visualization-container'));

    const svg = document.getElementById('connector-svg');
    const container = document.getElementById('visualization-container');

    function createConnector(startNodeId, endNodeId, color, label, delay, options = {}) {
        const startNode = document.getElementById(startNodeId);
        const endNode = document.getElementById(endNodeId);
        if (!startNode || !endNode) return;

        const containerRect = container.getBoundingClientRect();
        const startRect = startNode.getBoundingClientRect();
        const endRect = endNode.getBoundingClientRect();

        let startX = startRect.left + startRect.width / 2 - containerRect.left;
        let startY = startRect.bottom - containerRect.top;
        let endX = endRect.left + endRect.width / 2 - containerRect.left;
        let endY = endRect.top - containerRect.top;

        if (options.startSide === 'top') startY = startRect.top - containerRect.top;
        if (options.startSide === 'left') startX = startRect.left - containerRect.left;
        if (options.startSide === 'right') startX = startRect.right - containerRect.left;
        
        if (options.endSide === 'top') endY = endRect.top - containerRect.top;
        if (options.endSide === 'left') endX = endRect.left - containerRect.left;
        if (options.endSide === 'right') endX = endRect.right - containerRect.left;

        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        let d;

        if (options.feedbackLoop) {
            const controlX1 = startX + 100;
            const controlY1 = startY;
            const controlX2 = endX + 100;
            const controlY2 = endY;
            d = `M ${startX} ${startY} C ${controlX1} ${controlY1}, ${controlX2} ${controlY2}, ${endX} ${endY}`;
        } else {
            const c1x = startX;
            const c1y = startY + (endY - startY) * 0.5;
            const c2x = endX;
            const c2y = endY - (endY - startY) * 0.5;
            d = `M ${startX} ${startY} C ${c1x} ${c1y}, ${c2x} ${c2y}, ${endX} ${endY}`;
        }

        path.setAttribute('d', d);
        path.setAttribute('class', 'connector-path');
        path.setAttribute('stroke', color);
        path.style.setProperty('--delay', `${delay}s`);
        if(options.dashed) path.setAttribute('stroke-dasharray', '5, 5');

        const markerId = `arrowhead-${color.replace(/[^a-zA-Z0-9]/g, '')}`;
        if (!document.getElementById(markerId)) {
            const defs = svg.querySelector('defs') || document.createElementNS('http://www.w3.org/2000/svg', 'defs');
            const marker = document.createElementNS('http://www.w3.org/2000/svg', 'marker');
            marker.setAttribute('id', markerId);
            marker.setAttribute('viewBox', '0 0 10 10');
            marker.setAttribute('refX', '8');
            marker.setAttribute('refY', '5');
            marker.setAttribute('markerWidth', '6');
            marker.setAttribute('markerHeight', '6');
            marker.setAttribute('orient', 'auto-start-reverse');
            const arrowPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            arrowPath.setAttribute('d', 'M 0 0 L 10 5 L 0 10 z');
            arrowPath.setAttribute('fill', color);
            marker.appendChild(arrowPath);
            defs.appendChild(marker);
            svg.prepend(defs);
        }
        path.setAttribute('marker-end', `url(#${markerId})`);
        svg.appendChild(path);

        if (label) {
            const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            text.textContent = label;
            text.setAttribute('class', 'connector-label');
            text.style.setProperty('--delay', `${delay + 0.5}s`);
            text.setAttribute('fill', color);
            
            let textX = (startX + endX) / 2;
            let textY = (startY + endY) / 2 - 8;
            if(options.labelOffset) {
                textX += options.labelOffset.x;
                textY += options.labelOffset.y;
            }
            text.setAttribute('x', textX);
            text.setAttribute('y', textY);
            svg.appendChild(text);
        }
    }

    function drawConnectors() {
        svg.innerHTML = ''; // Clear previous connectors
        
        // A -> B & C
        createConnector('node-A', 'node-B', 'var(--color-text-dim)', 'Input', 0.5);
        createConnector('node-A', 'node-C', 'var(--color-text-dim)', 'Input', 0.6);
        
        // B & C -> F
        createConnector('node-B', 'node-F', 'var(--color-text-dim)', null, 0.8, {startSide: 'right', endSide: 'left'});
        createConnector('node-C', 'node-F', 'var(--color-text-dim)', null, 0.9, {startSide: 'left', endSide: 'right'});
        
        // F -> H
        createConnector('node-F', 'node-H', 'var(--color-text-dim)', 'For Inspection', 1.0);
        
        // H -> G (Pass)
        createConnector('node-H', 'node-G', 'var(--color-pass)', 'Pass', 1.2);
        
        // H -> I (Fail)
        createConnector('node-H', 'node-I', 'var(--color-fail)', 'Fail', 1.3, {startSide: 'right', endSide: 'left'});
        
        // I -> F (Feedback Loop)
        createConnector('node-I', 'node-F', 'var(--color-fail)', 'Corrective Action', 1.4, {startSide: 'top', endSide: 'right', feedbackLoop: true, labelOffset: {x: 50, y: -20}});

        // Monitoring lines to SI
        createConnector('node-B', 'node-SI', 'var(--color-monitor)', null, 1.5, {startSide: 'bottom', endSide: 'top', dashed: true});
        createConnector('node-C', 'node-SI', 'var(--color-monitor)', null, 1.5, {startSide: 'bottom', endSide: 'top', dashed: true});
        createConnector('node-F', 'node-SI', 'var(--color-monitor)', null, 1.5, {startSide: 'left', endSide: 'right', dashed: true});
        
        // SI -> H (Evidence)
        createConnector('node-SI', 'node-H', 'var(--color-monitor)', 'Evidence', 1.6, {startSide: 'right', endSide: 'left'});
    }

    let resizeTimeout;
    window.addEventListener('resize', () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(drawConnectors, 250);
    });
});
</script>

</body>
</html>
